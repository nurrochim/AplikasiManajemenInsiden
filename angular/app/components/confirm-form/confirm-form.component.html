<section class="content-header">
    <h1>{{vm.form_title}}
        <!-- <small>Module description here</small> -->
    </h1>
    <ol class="breadcrumb">
        <li>
            <a ui-sref="app.landing">
                <i class="fa fa-dashboard"></i> Home</a>
        </li>
        <li>
            <a ui-sref="app.confirm">Incident List</a>
        </li>
        <li class="active">{{vm.form_title}}</li>
    </ol>
</section>
<section class="content">

    <div class="row">
        <div class="col-sm-12 col-md-7">
            <form class="form-horizontal" name="frmIssue" novalidate>
                <div class="box box-primary collapsed-box">

                    <div class="box-header with-border">
                        <h3 class="box-title">{{vm.form_subTitle}}</h3>
                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                <i class="fa fa-plus"></i>
                            </button>
                        </div>
                    </div>
                    <div class="box-body">
                        <div class="box box-info collapsed-box">
                            <div class="box-header with-border">
                                <h6 class="box-title">End User Info</h6>
                                <div class="box-tools pull-right">
                                    <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                        <i class="fa fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="box-body">
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Raised By</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" ng-model="vm.raisedBy" name="raiseDate" placeholder="Raised By" ng-disabled="vm.detailIncidentDisable">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Raised Date</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" ng-model="vm.raisedDate" name="raiseDate" placeholder="Raised Date" ng-disabled="vm.detailIncidentDisable">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Division</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" ng-model="vm.division" name="division" placeholder="Division" ng-disabled="vm.detailIncidentDisable">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Group Division</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" ng-model="vm.groupDivision" name="groupDivision" placeholder="Group Division" ng-disabled="vm.detailIncidentDisable">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Contact No</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" ng-model="vm.contactNo" name="contactNo" placeholder="Contact No" ng-disabled="vm.detailIncidentDisable">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="box box-info collapsed-box">
                            <div class="box-header with-border">
                                <h6 class="box-title">Detail Incident</h6>
                                <div class="box-tools pull-right">
                                    <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                        <i class="fa fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="box-body">
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Priority</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sel1" ng-model="vm.priority" ng-options="option.value as option.name for option in options"
                                            ng-disabled="vm.detailIncidentDisable" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Issue Descriptions</label>
                                    <div class="col-sm-8">
                                        <textarea type="text" class="form-control has-error" rows="5" id="issuedesc" name="issuedesc" placeholder="Issue descriptions"
                                            ng-model="vm.issueDescription" ng-disabled="vm.detailIncidentDisable"></textarea>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Module</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sel1" ng-model="vm.module" ng-options="option.value as option.name for option in optionsModul"
                                            ng-disabled="vm.detailIncidentDisable" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Sub Modul</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sel1" ng-model="vm.subModule" ng-options="option.value as option.name for option in optionsSubModul"
                                            ng-disabled="vm.detailIncidentDisable" />
                                    </div>
                                </div>
                                <div class="form-group" ng-if="filesOpenIcident.length > 0">
                                    <label class="col-sm-4 control-label">File Attachment</label>
                                    <div class="col-sm-8" style="font-size: 14px; padding-top: 5px">
                                        <li ng-repeat="file_item in filesOpenIcident">
                                            <a href="{{file_item.fileUrl}}" target="_blank">{{file_item.fileName}}</a>
                                            <br/>
                                        </li>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="box box-info collapsed-box">
                            <div class="box-header with-border">
                                <h6 class="box-title">Analyzing Result</h6>
                                <div class="box-tools pull-right">
                                    <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                        <i class="fa fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="box-body">
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Category Analysis</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sel1" ng-model="vm.categoryAnalysis" ng-options="option.value as option.name for option in options"
                                            ng-disabled="vm.detailIncidentDisable" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Category Group</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sel1" ng-model="vm.categoryGroup" ng-options="option.value as option.name for option in options"
                                            ng-disabled="vm.detailIncidentDisable" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Category Root Cause</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sel1" ng-model="vm.categoryRootCause" ng-options="option.value as option.name for option in options"
                                            ng-disabled="vm.detailIncidentDisable" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Root Cause Modul</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sel1" ng-model="vm.rootCauseModule" ng-options="option.value as option.name for option in options"
                                            ng-disabled="vm.detailIncidentDisable" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Root Cause Sub Modul</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="sel1" ng-model="vm.rootCauseSubModule" ng-options="option.value as option.name for option in options"
                                            ng-disabled="vm.detailIncidentDisable" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Function</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" ng-model="vm.function" name="function" placeholder="Function" ng-disabled="vm.detailIncidentDisable">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Suspected Reason
                                        <br/>(Root Cause)</label>
                                    <div class="col-sm-8">
                                        <textarea type="text" class="form-control has-error" rows="5" id="suspectedReason" name="suspectedReason" placeholder="Suspected Reason"
                                            ng-model="vm.suspectedReason" ng-disabled="vm.detailIncidentDisable"></textarea>
                                        <span class="help-inline" style="color: red" ng-show="frmIssue.issuedesc.$invalid && frmIssue.issuedesc.$touched">Issue Description is required</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Recreate Step</label>
                                    <div class="col-sm-8">
                                        <textarea type="text" class="form-control has-error" rows="5" id="recreateStep" name="recreateStep" placeholder="Recreate Step"
                                            ng-model="vm.recreateStep" ng-disabled="vm.detailIncidentDisable"></textarea>
                                        <span class="help-inline" style="color: red" ng-show="frmIssue.issuedesc.$invalid && frmIssue.issuedesc.$touched">Issue Description is required</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Respon Taken</label>
                                    <div class="col-sm-8">
                                        <textarea type="text" class="form-control has-error" rows="5" id="responTaken" name="responTaken" placeholder="Respon Taken"
                                            ng-model="vm.responTaken" ng-disabled="vm.detailIncidentDisable"></textarea>
                                        <span class="help-inline" style="color: red" ng-show="frmIssue.issuedesc.$invalid && frmIssue.issuedesc.$touched">Issue Description is required</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Decide Solution</label>
                                    <div class="col-sm-8">
                                        <textarea type="text" class="form-control has-error" rows="5" id="decideSolution" name="decideSolution" placeholder="Decide Solution"
                                            ng-model="vm.decidedSolution" ng-disabled="vm.detailIncidentDisable"></textarea>
                                        <span class="help-inline" style="color: red" ng-show="frmIssue.issuedesc.$invalid && frmIssue.issuedesc.$touched">Issue Description is required</span>
                                    </div>
                                </div>
                                <div class="form-group" ng-if="filesAnalyzing.length > 0">
                                    <label class="col-sm-4 control-label">Analyzing Files</label>
                                    <div class="col-sm-8" style="font-size: 14px; padding-top: 5px">
                                        <li ng-repeat="file_item in filesAnalyzing">
                                            <a href="{{file_item.fileUrl}}" target="_blank">{{file_item.fileName}}</a>
                                            <br/>
                                        </li>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="box box-info collapsed-box">
                            <div class="box-header with-border">
                                <h6 class="box-title">Fixing Result</h6>
                                <div class="box-tools pull-right">
                                    <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                        <i class="fa fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="box-body">
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Fixing Note's</label>
                                    <div class="col-sm-8">
                                        <textarea type="text" class="form-control has-error" rows="5" id="issuedesc" name="issuedesc" placeholder="Fixing Note's"
                                            ng-model="vm.fixingNotes" ng-disabled="vm.detailIncidentDisable"></textarea>
                                        <span class="help-inline" style="color: red" ng-show="frmIssue.issuedesc.$invalid && frmIssue.issuedesc.$touched">Issue Description is required</span>
                                    </div>
                                </div>
                                <div class="form-group" ng-if="filesFixing.length > 0">
                                    <label class="col-sm-4 control-label">Fixing Files</label>
                                    <div class="col-sm-8" style="font-size: 14px; padding-top: 5px">
                                        <li ng-repeat="file_item in filesFixing">
                                            <a href="{{file_item.fileUrl}}" target="_blank">{{file_item.fileName}}</a>
                                            <br/>
                                        </li>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="box box-info collapsed-box">
                            <div class="box-header with-border">
                                <h6 class="box-title">Testing Result</h6>
                                <div class="box-tools pull-right">
                                    <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                        <i class="fa fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="box-body">
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Testing Note's</label>
                                    <div class="col-sm-8">
                                        <textarea type="text" class="form-control has-error" rows="5" id="issuedesc" name="issuedesc" placeholder="Testing Note's"
                                            ng-model="vm.testingNotes" ng-disabled="vm.detailIncidentDisable"></textarea>
                                        <span class="help-inline" style="color: red" ng-show="frmIssue.issuedesc.$invalid && frmIssue.issuedesc.$touched">Issue Description is required</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Test Scenario</label>
                                    <div class="col-sm-8">
                                        <textarea type="text" class="form-control has-error" rows="5" id="issuedesc" name="issuedesc" placeholder="Test Scenario"
                                            ng-model="vm.testScenario" ng-disabled="vm.detailIncidentDisable"></textarea>
                                        <span class="help-inline" style="color: red" ng-show="frmIssue.issuedesc.$invalid && frmIssue.issuedesc.$touched">Issue Description is required</span>
                                    </div>
                                </div>
                                <div class="form-group" ng-if="filesTesting.length > 0">
                                    <label class="col-sm-4 control-label">Testing Files</label>
                                    <div class="col-sm-8" style="font-size: 14px; padding-top: 5px">
                                        <li ng-repeat="file_item in filesTesting">
                                            <a href="{{file_item.fileUrl}}" target="_blank">{{file_item.fileName}}</a>
                                            <br/>
                                        </li>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="box box-danger">
                    <div class="box-header"></div>


                    <div class="box-body">
                        <div ng-show="vm.showAlert" class="box box-info">
                            <div ng-if="vm.alerts" class="box-header with-border">
                                <h3 class="box-title">Info Message</h3>
                                <div class="box-tools pull-right">
                                    <button type="button" class="btn btn-box-tool" data-widget="collapse">
                                        <i class="fa fa-minus"></i>
                                    </button>
                                    <button type="button" class="btn btn-box-tool" data-widget="remove">
                                        <i class="fa fa-times"></i>
                                    </button>
                                </div>
                            </div>

                            <div ng-if="vm.alerts" class="box-body alert alert-{{alert.type}}" ng-repeat="alert in vm.alerts">
                                <h4>{{alert.title}}</h4>
                                <p>{{alert.msg}}</p>
                            </div>

                        </div>
                        <div ng-show="vm.stepOne">
                            <div class="panel panel-default">
                                <div class="panel-heading">History Confirm Incident</div>
                                <div class="panel-body">
                                    <div class="col-sm-12" style="padding-bottom: 10px">
                                        <div class="box-tools pull-right">
                                            <a ng-click="vm.toggle('add', 0)" class="btn btn-block btn-success btn-xs">
                                                <i class="fa fa-plus"></i> Add New</a>
                                        </div>
                                    </div>
                                    <br/>
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr style="background: whitesmoke">
                                                <th style="text-align: center; width:20%">PIC</th>
                                                <th style="text-align: center; width:35%">Submit Info</th>
                                                <th style="text-align: center; width:35%">Respon Description</th>
                                                <th style="text-align: center;">Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="confirm in confirmHistory">
                                                <td>{{ confirm.userName}}</td>
                                                <td><text style="font-size: 12px;font-weight: bold;">Submit Date : </text> {{confirm.submitDate}}
                                                    <br/><text style="font-size: 12px;font-weight: bold;">Confirm Description : </text> 
                                                    <br/>{{confirm.confirmDescription}}
                                                </td>
                                                <td><a ng-if="!confirm.responApproval"class="btn btn-block btn-default btn-xs">Waiting Respon</a>
                                                    <a ng-if="confirm.responApproval == 'Reject'"class="btn btn-block btn-danger btn-xs">Issue Not Clear</a>
                                                    <a ng-if="confirm.responApproval == 'Approve'"class="btn btn-block btn-info btn-xs">Approve For Closing</a>
                                                    <br/><text ng-if="confirm.receiveResponDate" style="font-size: 12px;font-weight: bold;">Respon Date : </text> <text ng-if="confirm.receiveResponDate">{{confirm.receiveResponDate}}</text>
                                                    <br/><text ng-if="confirm.responDescription" style="font-size: 12px;font-weight: bold;">Respon Description : </text> 
                                                    <br/><text ng-if="confirm.responDescription">{{confirm.responDescription}}</text>
                                                </td>
                                                <td style="text-align: center">
                                                    <button class="btn btn-xs btn-warning" ng-click="vm.toggle('edit', confirm.id)" uib-tooltip="Edit">
                                                        <i class="fa fa-edit"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="panel panel-default">
                                <div class="panel-heading">History Assignment Task</div>
                                <div class="panel-body">
                                    <div class="col-sm-12" style="padding-bottom: 10px">
                                        <div class="box-tools pull-right">
                                            <a ng-click="vm.reAssignTask(vm.EditIssueId)" class="btn btn-block btn-danger btn-xs">
                                                <i class="fa fa-undo"></i> Re-Assign Task</a>
                                        </div>
                                    </div>
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr style="background: whitesmoke">
                                                <th style="text-align: center">Task</th>
                                                <th style="text-align: center">PIC Name</th>
                                                <th style="text-align: center">Start Date</th>
                                                <th style="text-align: center">Finish Date</th>
                                                <th style="text-align: center">Target Date</th>
                                                <!-- <th style="text-align: center">Action</th> -->
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="pic in assignTaskPIC">
                                                <td>{{ pic.taskName}}</td>
                                                <td>{{ pic.picName}}</td>
                                                <td>{{ pic.startDate}}</td>
                                                <td>{{ pic.finishDate}}</td>
                                                <td>{{ pic.targetDate}}</td>
                                                <!-- <td style="text-align: center"> -->
                                                    <!-- <button class="btn btn-xs btn-warning" uib-tooltip="Edit" ng-click="vm.toggle('edit', 0)">
                                                                <i class="fa fa-edit"></i>
                                                            </button> -->
                                                    <!-- <button class="btn btn-xs btn-warning" ng-click="vm.delete(pic.id)" uib-tooltip="Edit">
                                                        <i class="fa fa-edit"></i>
                                                    </button>
                                                </td> -->
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                    </div>
            </form>
            </div>
        </div>
        <script type="text/ng-template" id="myModalContent.html">
            <div class="modal-header">
                    <h4 class="modal-title" id="myModalLabel">{{mvm.title}}</h4>
            </div>
            <div class="modal-body">
                    <form name="frmIncident" class="form-horizontal" novalidate="">
                            <div class="form-group">
                                <label class="col-sm-4 control-label">PIC Name</label>
                                <div class="col-sm-5">
                                    <select class="form-control" id="sel1" ng-model="mvm.pic" ng-options="option as option.name for option in teamMember track by option.id"
                                    />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-4 control-label">Submit Date</label>
                                <div class="col-sm-5">
                                    <p class="input-group">
                                        <input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="mvm.dtSubmit" is-open="popup1.opened" datepicker-options="dateOptions"
                                            ng-required="true" close-text="Close" alt-input-formats="altInputFormats" />
                                        <span class="input-group-btn">
                                            <button type="button" class="btn btn-default" ng-click="open1()">
                                                <i class="fa fa-calendar"></i>
                                            </button>
                                        </span>
                                    </p>
                                </div>
                            </div>
                            <div class="form-group">
                                    <label class="col-sm-4 control-label">Respon Description</label>
                                    <div class="col-sm-8">
                                        <textarea type="text" class="form-control has-error" rows="5" id="issuedesc" name="issuedesc" placeholder="Confirm Description"
                                            ng-model="mvm.confirmDescription"></textarea>
                                        <span class="help-inline" style="color: red" ng-show="frmIssue.issuedesc.$invalid && frmIssue.issuedesc.$touched">Issue Description is required</span>
                                    </div>
                                </div>   
                        </form>
            </div>
            <div class="modal-footer">
              <button class="btn btn-primary" type="button" ng-click="mvm.ok()">OK</button>
              <button class="btn btn-warning" type="button" ng-click="mvm.cancel()">Cancel</button>
            </div>
          </script>
        <div>
            <style>
                .full button span {
                    background-color: limegreen;
                    border-radius: 32px;
                    color: black;
                }

                .partially button span {
                    background-color: orange;
                    border-radius: 32px;
                    color: black;
                }

                .stepwizard-step p {
                    margin-top: 10px;
                }

                .stepwizard-row {
                    display: table-row;
                }

                .stepwizard {
                    display: table;
                    width: 50%;
                    position: relative;
                }

                .stepwizard-step button[disabled] {
                    opacity: 1 !important;
                    filter: alpha(opacity=100) !important;
                }

                .stepwizard-row:before {
                    top: 14px;
                    bottom: 0;
                    position: absolute;
                    content: " ";
                    width: 100%;
                    height: 1px;
                    background-color: #ccc;
                    z-order: 0;
                }

                .stepwizard-step {
                    display: table-cell;
                    text-align: center;
                    position: relative;
                }

                .btn-circle {
                    width: 30px;
                    height: 30px;
                    text-align: center;
                    padding: 6px 0;
                    font-size: 12px;
                    line-height: 1.428571429;
                    border-radius: 15px;
                }
            </style>
</section>